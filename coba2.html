<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generator Modul Ajar AI - Kurikulum Merdeka</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html-docx-js/0.4.1/html-docx.min.js"></script>
    <style>
        body {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .analysis-box {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-left: 4px solid #3b82f6;
        }
        
        .loading-dots {
            display: inline-block;
        }
        
        .loading-dots::after {
            content: '';
            animation: dots 1.5s steps(5, end) infinite;
        }
        
        @keyframes dots {
            0%, 20% { content: ''; }
            40% { content: '.'; }
            60% { content: '..'; }
            80%, 100% { content: '...'; }
        }
    </style>
</head>
<body class="min-h-full bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50">
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-6 py-8">
            <div class="text-center">
                <h1 class="text-4xl md:text-5xl font-bold mb-4">
                    üß† Generator Modul Ajar AI
                </h1>
                <p class="text-xl mb-6">Kurikulum Merdeka - Analisis Mendalam & Terstruktur</p>
                <div class="flex flex-wrap items-center justify-center gap-3 mb-6">
                    <span class="bg-white/20 px-3 py-1 rounded-full text-sm">ü§ñ AI Analysis</span>
                    <span class="bg-white/20 px-3 py-1 rounded-full text-sm">üìö Kurikulum Merdeka</span>
                    <span class="bg-white/20 px-3 py-1 rounded-full text-sm">üìÑ Format Word</span>
                </div>
                <p class="text-lg opacity-90 max-w-2xl mx-auto">
                    Menganalisis input pembelajaran secara mendalam dan menghasilkan modul ajar terstruktur sesuai kurikulum terbaru
                </p>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-6 py-8">


        <!-- Form Input Section -->
        <section id="formSection" class="mb-12">
            <div class="bg-white rounded-xl shadow-lg p-8 card-hover">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-800 mb-4">
                        üìù Input Data Pembelajaran
                    </h2>
                    <p class="text-lg text-gray-600">Masukkan data untuk analisis mendalam dan pembuatan modul ajar</p>
                </div>
                <form id="modulForm" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="mataPelajaran" class="block text-lg font-semibold text-gray-800 mb-3">Mata Pelajaran</label>
                            <select id="mataPelajaran" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">Pilih Mata Pelajaran</option>
                                <optgroup label="üìö Mata Pelajaran Umum (SD/SMP/SMA)">
                                    <option value="Matematika">Matematika</option>
                                    <option value="Bahasa Indonesia">Bahasa Indonesia</option>
                                    <option value="Bahasa Inggris">Bahasa Inggris</option>
                                    <option value="IPA">IPA (Ilmu Pengetahuan Alam)</option>
                                    <option value="IPS">IPS (Ilmu Pengetahuan Sosial)</option>
                                    <option value="Informatika">Informatika/TIK</option>
                                    <option value="PJOK">PJOK (Pendidikan Jasmani)</option>
                                    <option value="Seni Budaya">Seni Budaya</option>
                                    <option value="Prakarya">Prakarya</option>
                                    <option value="PPKn">PPKn (Pendidikan Pancasila)</option>
                                </optgroup>
                                <optgroup label="üôè Pendidikan Agama">
                                    <option value="PAI">PAI (Pendidikan Agama Islam)</option>
                                    <option value="PA Kristen">PA Kristen</option>
                                    <option value="PA Katolik">PA Katolik</option>
                                    <option value="PA Hindu">PA Hindu</option>
                                    <option value="PA Buddha">PA Buddha</option>
                                    <option value="PA Khonghucu">PA Khonghucu</option>
                                </optgroup>
                                <optgroup label="üî¨ Mata Pelajaran SMA (Peminatan)">
                                    <option value="Fisika">Fisika</option>
                                    <option value="Kimia">Kimia</option>
                                    <option value="Biologi">Biologi</option>
                                    <option value="Geografi">Geografi</option>
                                    <option value="Sejarah">Sejarah</option>
                                    <option value="Sosiologi">Sosiologi</option>
                                    <option value="Ekonomi">Ekonomi</option>
                                    <option value="Antropologi">Antropologi</option>
                                    <option value="Bahasa Daerah">Bahasa Daerah</option>
                                    <option value="Bahasa Asing">Bahasa Asing (Mandarin/Jepang/Arab)</option>
                                </optgroup>
                                <optgroup label="üõ†Ô∏è Mata Pelajaran SMK">
                                    <option value="Teknik Komputer Jaringan">Teknik Komputer & Jaringan</option>
                                    <option value="Rekayasa Perangkat Lunak">Rekayasa Perangkat Lunak</option>
                                    <option value="Multimedia">Multimedia</option>
                                    <option value="Akuntansi">Akuntansi & Keuangan</option>
                                    <option value="Administrasi Perkantoran">Administrasi Perkantoran</option>
                                    <option value="Pemasaran">Pemasaran</option>
                                    <option value="Teknik Mesin">Teknik Mesin</option>
                                    <option value="Teknik Elektro">Teknik Elektro</option>
                                    <option value="Teknik Otomotif">Teknik Otomotif</option>
                                    <option value="Teknik Bangunan">Teknik Bangunan</option>
                                    <option value="Tata Boga">Tata Boga</option>
                                    <option value="Tata Busana">Tata Busana</option>
                                    <option value="Perhotelan">Perhotelan</option>
                                    <option value="Pariwisata">Pariwisata</option>
                                    <option value="Agribisnis">Agribisnis</option>
                                    <option value="Perikanan">Perikanan</option>
                                    <option value="Kehutanan">Kehutanan</option>
                                </optgroup>
                                <optgroup label="üéØ Mata Pelajaran Khusus SD">
                                    <option value="Tematik">Pembelajaran Tematik</option>
                                    <option value="Literasi">Literasi & Numerasi</option>
                                    <option value="Karakter">Pendidikan Karakter</option>
                                </optgroup>
                            </select>
                        </div>
                        <div>
                            <label for="kelas" class="block text-lg font-semibold text-gray-800 mb-3">Kelas</label>
                            <select id="kelas" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">Pilih Kelas/Fase</option>
                                <optgroup label="üéí Sekolah Dasar (SD)">
                                    <option value="I">Kelas I (Fase A)</option>
                                    <option value="II">Kelas II (Fase A)</option>
                                    <option value="III">Kelas III (Fase B)</option>
                                    <option value="IV">Kelas IV (Fase B)</option>
                                    <option value="V">Kelas V (Fase C)</option>
                                    <option value="VI">Kelas VI (Fase C)</option>
                                </optgroup>
                                <optgroup label="üè´ Sekolah Menengah Pertama (SMP)">
                                    <option value="VII">Kelas VII (Fase D)</option>
                                    <option value="VIII">Kelas VIII (Fase D)</option>
                                    <option value="IX">Kelas IX (Fase E)</option>
                                </optgroup>
                                <optgroup label="üéì Sekolah Menengah Atas (SMA)">
                                    <option value="X">Kelas X (Fase E)</option>
                                    <option value="XI">Kelas XI (Fase F)</option>
                                    <option value="XII">Kelas XII (Fase F)</option>
                                </optgroup>
                                <optgroup label="üõ†Ô∏è Sekolah Menengah Kejuruan (SMK)">
                                    <option value="X SMK">Kelas X SMK (Fase E)</option>
                                    <option value="XI SMK">Kelas XI SMK (Fase F)</option>
                                    <option value="XII SMK">Kelas XII SMK (Fase F)</option>
                                </optgroup>
                                <optgroup label="üåü Pendidikan Khusus">
                                    <option value="PAUD">PAUD (Usia 3-6 tahun)</option>
                                    <option value="TK A">TK A (Usia 4-5 tahun)</option>
                                    <option value="TK B">TK B (Usia 5-6 tahun)</option>
                                    <option value="SLB">SLB (Berkebutuhan Khusus)</option>
                                </optgroup>
                            </select>
                        </div>
                    </div>

                    <div>
                        <label for="topik" class="block text-lg font-semibold text-gray-800 mb-3">Topik/Materi Pembelajaran</label>
                        <input type="text" id="topik" placeholder="Contoh: Fungsi Kuadrat, Sistem Pencernaan, Teks Persuasi" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>

                    <div>
                        <label for="metodePembelajaran" class="block text-lg font-semibold text-gray-800 mb-3">Metode Pembelajaran</label>
                        <select id="metodePembelajaran" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Pilih Metode Pembelajaran</option>
                            <option value="Ceramah Interaktif">Ceramah Interaktif</option>
                            <option value="Diskusi Kelompok">Diskusi Kelompok</option>
                            <option value="Tanya Jawab">Tanya Jawab</option>
                            <option value="Demonstrasi">Demonstrasi</option>
                            <option value="Eksperimen">Eksperimen</option>
                            <option value="Simulasi">Simulasi</option>
                            <option value="Role Playing">Role Playing</option>
                            <option value="Brainstorming">Brainstorming</option>
                            <option value="Mind Mapping">Mind Mapping</option>
                            <option value="Studi Kasus">Studi Kasus</option>
                            <option value="Peer Teaching">Peer Teaching</option>
                            <option value="Gallery Walk">Gallery Walk</option>
                            <option value="Think Pair Share">Think Pair Share</option>
                            <option value="Jigsaw">Jigsaw</option>
                            <option value="Storytelling">Storytelling</option>
                        </select>
                    </div>

                    <div>
                        <label for="modelPembelajaran" class="block text-lg font-semibold text-gray-800 mb-3">Model Pembelajaran</label>
                        <select id="modelPembelajaran" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Pilih Model Pembelajaran</option>
                            <option value="Problem Based Learning">Problem Based Learning (PBL)</option>
                            <option value="Project Based Learning">Project Based Learning</option>
                            <option value="Discovery Learning">Discovery Learning</option>
                            <option value="Inquiry Learning">Inquiry Learning</option>
                            <option value="Cooperative Learning">Cooperative Learning</option>
                            <option value="Blended Learning">Blended Learning</option>
                            <option value="STEAM">STEAM (Science, Technology, Engineering, Arts, Mathematics)</option>
                            <option value="Flipped Classroom">Flipped Classroom</option>
                            <option value="Design Thinking">Design Thinking</option>
                            <option value="Service Learning">Service Learning</option>
                            <option value="Contextual Teaching Learning">Contextual Teaching Learning (CTL)</option>
                            <option value="Differentiated Instruction">Differentiated Instruction</option>
                            <option value="Gamification">Gamification</option>
                            <option value="Outdoor Learning">Outdoor Learning</option>
                            <option value="Case Based Learning">Case Based Learning</option>
                            <option value="Experiential Learning">Experiential Learning</option>
                            <option value="Collaborative Learning">Collaborative Learning</option>
                            <option value="Constructivist Learning">Constructivist Learning</option>
                            <option value="Authentic Assessment">Authentic Assessment</option>
                            <option value="Peer Learning">Peer Learning</option>
                        </select>
                    </div>

                    <div>
                        <label for="tujuanPembelajaran" class="block text-lg font-semibold text-gray-800 mb-3">Tujuan Pembelajaran Spesifik</label>
                        <textarea id="tujuanPembelajaran" rows="4" placeholder="Contoh: Siswa mampu menganalisis fungsi kuadrat untuk optimalisasi keuntungan UMKM, menerapkan konsep dalam konteks ekonomi lokal..." class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"></textarea>
                    </div>

                    <div>
                        <label for="lintasBidang" class="block text-lg font-semibold text-gray-800 mb-4">Lintas Bidang Disiplin Ilmu</label>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <label class="flex items-center space-x-3 p-3 rounded-lg bg-gray-50 cursor-pointer hover:bg-blue-50 transition-colors">
                                <input type="checkbox" name="lintasBidang" value="Ekonomi" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                <span class="text-base font-medium">Ekonomi</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 rounded-lg bg-gray-50 cursor-pointer hover:bg-blue-50 transition-colors">
                                <input type="checkbox" name="lintasBidang" value="Teknologi" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                <span class="text-base font-medium">Teknologi</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 rounded-lg bg-gray-50 cursor-pointer hover:bg-blue-50 transition-colors">
                                <input type="checkbox" name="lintasBidang" value="Lingkungan" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                <span class="text-base font-medium">Lingkungan</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 rounded-lg bg-gray-50 cursor-pointer hover:bg-blue-50 transition-colors">
                                <input type="checkbox" name="lintasBidang" value="Sosial Budaya" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                <span class="text-base font-medium">Sosial Budaya</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 rounded-lg bg-gray-50 cursor-pointer hover:bg-blue-50 transition-colors">
                                <input type="checkbox" name="lintasBidang" value="Kesehatan" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                <span class="text-base font-medium">Kesehatan</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 rounded-lg bg-gray-50 cursor-pointer hover:bg-blue-50 transition-colors">
                                <input type="checkbox" name="lintasBidang" value="Seni & Budaya" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                <span class="text-base font-medium">Seni & Budaya</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 rounded-lg bg-gray-50 cursor-pointer hover:bg-blue-50 transition-colors">
                                <input type="checkbox" name="lintasBidang" value="Kewirausahaan" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                <span class="text-base font-medium">Kewirausahaan</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 rounded-lg bg-gray-50 cursor-pointer hover:bg-blue-50 transition-colors">
                                <input type="checkbox" name="lintasBidang" value="Politik & Hukum" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                <span class="text-base font-medium">Politik & Hukum</span>
                            </label>
                        </div>
                        <div class="mt-6">
                            <label for="lintasBidangLainnya" class="block text-lg font-semibold text-gray-800 mb-3">Bidang Lainnya (opsional)</label>
                            <input type="text" id="lintasBidangLainnya" placeholder="Contoh: Psikologi, Antropologi, Geografi, dll." class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="saranaPrasarana" class="block text-sm font-medium text-gray-700 mb-2">Sarana & Prasarana</label>
                            <div class="space-y-2">
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" name="sarana" value="Laptop/Komputer" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                    <span class="text-sm">Laptop/Komputer</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" name="sarana" value="Proyektor" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                    <span class="text-sm">Proyektor & Layar</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" name="sarana" value="Internet" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                    <span class="text-sm">Akses Internet</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" name="sarana" value="Lab" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                    <span class="text-sm">Laboratorium</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" name="sarana" value="Alat Peraga" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                    <span class="text-sm">Alat Peraga</span>
                                </label>
                            </div>
                        </div>
                        <div>
                            <label for="sumberBelajar" class="block text-sm font-medium text-gray-700 mb-2">Sumber Belajar</label>
                            <div class="space-y-2">
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" name="sumber" value="Buku Teks" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                    <span class="text-sm">Buku Teks Kurikulum</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" name="sumber" value="Video Pembelajaran" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                    <span class="text-sm">Video Pembelajaran</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" name="sumber" value="Artikel Jurnal" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                    <span class="text-sm">Artikel Jurnal</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" name="sumber" value="Website Edukatif" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                    <span class="text-sm">Website Edukatif</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" name="sumber" value="Narasumber Ahli" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                    <span class="text-sm">Narasumber Ahli</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="alokasi" class="block text-sm font-medium text-gray-700 mb-2">Alokasi Waktu</label>
                            <select id="alokasi" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">Pilih Alokasi Waktu</option>
                                <option value="1 x 40 menit">1 x 40 menit</option>
                                <option value="2 x 40 menit">2 x 40 menit</option>
                                <option value="3 x 40 menit">3 x 40 menit</option>
                                <option value="4 x 40 menit">4 x 40 menit</option>
                            </select>
                        </div>
                        <div>
                            <label for="jumlahSiswa" class="block text-sm font-medium text-gray-700 mb-2">Jumlah Siswa</label>
                            <input type="number" id="jumlahSiswa" placeholder="Contoh: 32" min="1" max="50" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                    </div>

                    <button type="submit" class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-4 px-8 rounded-lg font-bold text-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:from-blue-700 hover:to-purple-700">
                        üß† Analisis & Generate Modul Ajar
                    </button>
                </form>
            </div>
        </section>

        <!-- Results Section -->
        <section id="hasilSection" class="hidden fade-in">
            <div class="bg-white rounded-2xl shadow-xl p-8 card-hover">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-3xl font-bold text-gray-800 flex items-center">
                        üìã Modul Ajar AI v13.0 Enhanced
                    </h2>
                    <div class="flex space-x-3">
                        <button onclick="downloadWord()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-300 flex items-center space-x-2 text-sm touch-highlight">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm0 2h12v8H4V6z"/>
                            </svg>
                            <span>üìÑ Word</span>
                        </button>
                        <button onclick="downloadPDF()" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors duration-300 flex items-center space-x-2 text-sm touch-highlight">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm0 2h12v8H4V6z"/>
                            </svg>
                            <span>üìë PDF</span>
                        </button>
                        <button onclick="copyToClipboard()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors duration-300 flex items-center space-x-2 text-sm touch-highlight">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"/>
                                <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"/>
                            </svg>
                            <span>üìã Copy</span>
                        </button>
                        <button onclick="downloadLKPD()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors duration-300 flex items-center space-x-2 text-sm touch-highlight">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"/>
                            </svg>
                            <span>üìù LKPD</span>
                        </button>
                    </div>
                </div>
                <div id="hasilModul" class="prose max-w-none"></div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="mb-16 fade-in">
            <div class="glass-card rounded-3xl p-10 neon-border">
                <div class="text-center mb-10">
                    <h2 class="text-4xl font-black gradient-text mb-4">
                        ‚ú® Fitur Unggulan v13.0 Enhanced
                    </h2>
                    <p class="text-xl text-gray-600 font-light">Revolusi Pembelajaran dengan Teknologi AI Terdepan</p>
                    <div class="section-divider"></div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <div class="feature-card text-center p-8 rounded-2xl group touch-highlight">
                        <div class="w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center text-white text-3xl group-hover:scale-110 transition-transform duration-300 bounce-animation">
                            ü§ñ
                        </div>
                        <h3 class="text-2xl font-bold text-blue-800 mb-4">AI Powered</h3>
                        <p class="text-blue-600 leading-relaxed">Menggunakan kecerdasan buatan untuk menghasilkan modul yang berkualitas dan kontekstual</p>
                    </div>
                    <div class="feature-card text-center p-8 rounded-2xl group touch-highlight">
                        <div class="w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center text-white text-3xl group-hover:scale-110 transition-transform duration-300 bounce-animation">
                            üìö
                        </div>
                        <h3 class="text-2xl font-bold text-green-800 mb-4">Kurikulum Merdeka</h3>
                        <p class="text-green-600 leading-relaxed">Sesuai dengan standar dan prinsip Kurikulum Merdeka terbaru dengan 8 dimensi profil lulusan</p>
                    </div>
                    <div class="feature-card text-center p-8 rounded-2xl group touch-highlight">
                        <div class="w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center text-white text-3xl group-hover:scale-110 transition-transform duration-300 bounce-animation">
                            üéØ
                        </div>
                        <h3 class="text-2xl font-bold text-purple-800 mb-4">Kontekstual</h3>
                        <p class="text-purple-600 leading-relaxed">Pembelajaran yang relevan dengan kehidupan nyata siswa dan kebutuhan masa depan</p>
                    </div>
                    <div class="feature-card text-center p-8 rounded-2xl group touch-highlight">
                        <div class="w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl flex items-center justify-center text-white text-3xl group-hover:scale-110 transition-transform duration-300 bounce-animation">
                            ‚ö°
                        </div>
                        <h3 class="text-2xl font-bold text-orange-800 mb-4">Cepat & Mudah</h3>
                        <p class="text-orange-600 leading-relaxed">Generate modul ajar lengkap hanya dalam hitungan detik dengan kualitas profesional</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-6 text-center">
            <p class="text-lg mb-2">üß† Dashboard Pembuat Modul Ajar AI v13.0 Enhanced</p>
            <p class="text-gray-400">Edisi Guru Inovasi - Powered by AI Technology</p>
            <div class="mt-4 flex justify-center space-x-4 flex-wrap">
                <span class="bg-blue-600 px-3 py-1 rounded-full text-sm mb-2 touch-highlight">ü§ñ AI Powered</span>
                <span class="bg-green-600 px-3 py-1 rounded-full text-sm mb-2 touch-highlight">üìö Kurikulum Merdeka</span>
                <span class="bg-purple-600 px-3 py-1 rounded-full text-sm mb-2 touch-highlight">üéØ Kontekstual</span>
                <span class="bg-orange-600 px-3 py-1 rounded-full text-sm mb-2 touch-highlight">‚ö° Cepat & Mudah</span>
            </div>
            <div class="mt-4 text-sm text-gray-400">
                <p>¬© 2025 Dashboard Pembuat Modul Ajar AI - Enhanced Edition</p>
                <p>Membantu guru Indonesia menciptakan pembelajaran yang bermakna</p>
            </div>
        </div>
    </footer>

    <script>
        // Enhanced Scroll Progress Indicator
        let lastScrollTop = 0;
        const navbar = document.querySelector('header');
        
        window.addEventListener('scroll', function() {
            const scrollProgress = document.getElementById('scrollProgress');
            const scrollTop = window.pageYOffset;
            const docHeight = document.body.scrollHeight - window.innerHeight;
            const scrollPercent = (scrollTop / docHeight) * 100;
            scrollProgress.style.width = scrollPercent + '%';
            
            // Auto-hide navigation on scroll down
            if (scrollTop > lastScrollTop && scrollTop > 100) {
                navbar.classList.add('nav-hidden');
            } else {
                navbar.classList.remove('nav-hidden');
            }
            lastScrollTop = scrollTop;
        });

        // Smooth scroll functions
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function scrollToForm() {
            document.getElementById('formSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Enhanced AI Contextual Learning Database
        const contextualLearningDatabase = {
            'Matematika': {
                'SD': {
                    'Penjumlahan': 'Menghitung total belanja di warung sekolah untuk belajar mengelola uang saku dengan bijak dan mengembangkan kemampuan berhitung dalam kehidupan sehari-hari',
                    'Pengurangan': 'Menghitung sisa makanan di kantin sekolah untuk memahami konsep berkurang dan mengembangkan kesadaran tentang mengurangi sampah makanan',
                    'Perkalian': 'Menghitung jumlah tanaman di kebun sekolah untuk memahami konsep perkalian sambil belajar tentang pertanian dan lingkungan hidup',
                    'Pembagian': 'Membagi kue ulang tahun secara adil di kelas untuk memahami konsep pembagian dan nilai-nilai keadilan serta berbagi',
                    'Pecahan': 'Membagi pizza dalam acara kelas untuk memahami pecahan sambil belajar tentang kerjasama dan berbagi makanan',
                    'Geometri': 'Mengukur dan menggambar bentuk-bentuk di playground sekolah untuk memahami geometri dalam lingkungan nyata'
                },
                'SMP': {
                    'Aljabar': 'Menghitung biaya internet sekolah dengan variabel penggunaan untuk memahami persamaan linear sambil belajar tentang teknologi dan pengelolaan anggaran',
                    'Geometri': 'Merancang taman sekolah yang ramah lingkungan dengan menghitung luas dan keliling untuk mengoptimalkan ruang hijau dan pembelajaran outdoor',
                    'Statistika': 'Menganalisis data tinggi badan siswa untuk membuat program gizi sekolah yang tepat sasaran dan meningkatkan kesehatan siswa',
                    'Peluang': 'Menghitung peluang cuaca untuk merencanakan kegiatan outdoor sekolah dan mengembangkan kemampuan prediksi berbasis data',
                    'Persamaan Linear': 'Menghitung tarif listrik sekolah untuk mengoptimalkan penggunaan energi dan mengembangkan kesadaran hemat energi',
                    'Fungsi': 'Menganalisis hubungan antara waktu belajar dan nilai siswa untuk mengoptimalkan jadwal belajar yang efektif'
                },
                'SMA': {
                    'Fungsi Kuadrat': 'Mengoptimalkan lahan parkir sekolah untuk menampung maksimal kendaraan siswa dengan mempertimbangkan aspek keamanan dan efisiensi ruang',
                    'Trigonometri': 'Menghitung sudut elevasi untuk instalasi panel surya di atap sekolah guna mengoptimalkan energi terbarukan dan pembelajaran teknologi hijau',
                    'Limit': 'Menganalisis batas maksimal siswa dalam satu kelas untuk pembelajaran optimal dengan mempertimbangkan kualitas pendidikan dan interaksi sosial',
                    'Turunan': 'Mengoptimalkan kecepatan pertumbuhan tanaman di greenhouse sekolah untuk program pertanian berkelanjutan dan ketahanan pangan',
                    'Integral': 'Menghitung volume air hujan yang dapat ditampung untuk sistem irigasi sekolah dan mengembangkan kesadaran konservasi air',
                    'Matriks': 'Menganalisis jadwal pelajaran optimal untuk semua kelas dengan mempertimbangkan efisiensi guru dan fasilitas sekolah',
                    'Barisan dan Deret': 'Menghitung pertumbuhan tabungan siswa untuk program kewirausahaan sekolah dan literasi keuangan',
                    'Peluang': 'Menganalisis peluang keberhasilan program beasiswa untuk siswa kurang mampu dan meningkatkan akses pendidikan'
                },
                'SMK': {
                    'Matematika Teknik': 'Menghitung beban listrik optimal untuk workshop SMK agar aman dan efisien dalam mendukung pembelajaran praktik',
                    'Statistika Industri': 'Menganalisis data produksi hasil praktik siswa untuk meningkatkan kualitas dan efisiensi pembelajaran berbasis industri',
                    'Geometri Teknik': 'Merancang layout workshop yang ergonomis dan aman untuk meningkatkan produktivitas dan keselamatan kerja siswa'
                }
            },
            'IPA': {
                'SD': {
                    'Tumbuhan': 'Menanam sayuran organik di kebun sekolah untuk memahami pertumbuhan tumbuhan sambil menyediakan makanan sehat untuk kantin sekolah',
                    'Hewan': 'Mengamati kupu-kupu di taman sekolah untuk memahami metamorfosis dan pentingnya menjaga habitat alami',
                    'Benda dan Sifatnya': 'Memilah sampah di sekolah berdasarkan sifat benda untuk memahami klasifikasi materi dan mengembangkan kesadaran lingkungan',
                    'Energi': 'Membuat kincir angin sederhana untuk menerangi area sekolah dan memahami energi terbarukan'
                },
                'SMP': {
                    'Sistem Pencernaan': 'Merancang menu sehat kantin sekolah untuk mencegah stunting siswa dan meningkatkan kesehatan serta prestasi belajar',
                    'Sistem Pernapasan': 'Menganalisis kualitas udara di sekitar sekolah dan merancang taman hijau untuk meningkatkan kualitas udara dan kesehatan',
                    'Ekosistem': 'Membangun ekosistem mini di sekolah untuk memahami keseimbangan alam dan mengembangkan kesadaran konservasi',
                    'Listrik': 'Merancang sistem penerangan LED hemat energi untuk kelas dan memahami konsep listrik serta efisiensi energi',
                    'Zat dan Perubahannya': 'Mengolah sampah organik menjadi kompos untuk kebun sekolah dan memahami perubahan kimia yang bermanfaat'
                },
                'SMA': {
                    'Fisika': 'Merancang sistem ventilasi alami untuk kelas yang nyaman dengan memanfaatkan prinsip fisika dan meningkatkan kualitas pembelajaran',
                    'Kimia': 'Menganalisis kandungan nutrisi tanah sekolah untuk optimalisasi pertanian organik dan pembelajaran kimia terapan',
                    'Biologi': 'Mengembangkan program konservasi keanekaragaman hayati di lingkungan sekolah untuk pelestarian dan pembelajaran ekologi'
                }
            },
            'Bahasa Indonesia': {
                'SD': {
                    'Membaca': 'Membaca cerita rakyat daerah setempat untuk memahami budaya lokal dan mengembangkan kecintaan terhadap warisan budaya',
                    'Menulis': 'Menulis surat untuk orang tua tentang kegiatan sekolah untuk mengembangkan kemampuan komunikasi dan memperkuat hubungan keluarga',
                    'Berbicara': 'Bercerita tentang cita-cita di depan kelas untuk mengembangkan kepercayaan diri dan kemampuan public speaking'
                },
                'SMP': {
                    'Teks Deskripsi': 'Mendeskripsikan keindahan alam Indonesia untuk mempromosikan pariwisata lokal dan mengembangkan rasa cinta tanah air',
                    'Teks Narasi': 'Menulis pengalaman gotong royong di masyarakat untuk memahami nilai-nilai sosial dan memperkuat karakter',
                    'Teks Eksposisi': 'Menjelaskan pentingnya menjaga lingkungan hidup untuk mengembangkan kesadaran ekologi dan tanggung jawab sosial'
                },
                'SMA': {
                    'Teks Argumentasi': 'Menyusun argumen tentang pentingnya pendidikan karakter untuk membangun generasi yang berintegritas dan bermoral',
                    'Teks Negosiasi': 'Bernegosiasi dalam simulasi bisnis sekolah untuk mengembangkan kemampuan komunikasi dan jiwa kewirausahaan',
                    'Sastra': 'Menganalisis karya sastra Indonesia untuk memahami nilai-nilai budaya dan mengembangkan apresiasi terhadap karya bangsa'
                }
            },
            'Informatika': {
                'SMP': {
                    'Algoritma': 'Membuat algoritma untuk mengatur jadwal piket kelas secara adil dan efisien dengan mengembangkan kemampuan berpikir sistematis',
                    'Pemrograman': 'Membuat aplikasi sederhana untuk mencatat prestasi siswa dan membantu administrasi sekolah menjadi lebih digital'
                },
                'SMA': {
                    'Basis Data': 'Merancang sistem informasi perpustakaan sekolah untuk meningkatkan layanan dan minat baca siswa',
                    'Jaringan': 'Membangun jaringan internet sekolah yang aman dan cepat untuk mendukung pembelajaran digital yang efektif',
                    'Kecerdasan Buatan': 'Mengembangkan chatbot untuk informasi sekolah dan membantu siswa mengakses informasi dengan mudah'
                },
                'SMK': {
                    'Rekayasa Perangkat Lunak': 'Mengembangkan aplikasi e-learning untuk sekolah yang user-friendly dan mendukung pembelajaran jarak jauh',
                    'Sistem Informasi': 'Merancang sistem manajemen sekolah terintegrasi untuk meningkatkan efisiensi administrasi dan pelayanan',
                    'Keamanan Siber': 'Mengamankan data siswa dan sekolah dari ancaman cyber untuk melindungi privasi dan integritas informasi'
                }
            }
        };

        // Enhanced AI Context Generator
        function generateAIContext(mataPelajaran, kelas, topik, lintasBidang, modelPembelajaran) {
            // Determine education level
            let level = 'SMA';
            if (kelas.includes('I') || kelas.includes('II') || kelas.includes('III') || 
                kelas.includes('IV') || kelas.includes('V') || kelas.includes('VI') || 
                kelas.includes('PAUD') || kelas.includes('TK')) {
                level = 'SD';
            } else if (kelas.includes('VII') || kelas.includes('VIII') || kelas.includes('IX')) {
                level = 'SMP';
            } else if (kelas.includes('SMK')) {
                level = 'SMK';
            }

            // Get base context from database
            let baseContext = '';
            if (contextualLearningDatabase[mataPelajaran] && 
                contextualLearningDatabase[mataPelajaran][level] && 
                contextualLearningDatabase[mataPelajaran][level][topik]) {
                baseContext = contextualLearningDatabase[mataPelajaran][level][topik];
            } else {
                // Generate generic context based on subject and level
                const genericContexts = {
                    'SD': `Siswa belajar ${topik} melalui kegiatan bermain dan eksplorasi di lingkungan sekolah untuk mengembangkan pemahaman dasar dan karakter positif`,
                    'SMP': `Siswa menerapkan konsep ${topik} dalam proyek sekolah yang bermanfaat untuk komunitas dan mengembangkan kemampuan berpikir kritis`,
                    'SMA': `Siswa menganalisis ${topik} dalam konteks masalah nyata di masyarakat untuk mengembangkan solusi inovatif dan kemampuan problem solving`,
                    'SMK': `Siswa menerapkan ${topik} dalam simulasi industri dan proyek praktis untuk mempersiapkan dunia kerja dan kewirausahaan`
                };
                baseContext = genericContexts[level] || genericContexts['SMA'];
            }

            // Enhance context with cross-disciplinary integration
            if (lintasBidang && lintasBidang.length > 0) {
                const integrationPhrases = {
                    'Teknologi': 'dengan memanfaatkan teknologi digital dan aplikasi modern',
                    'Ekonomi': 'dengan mempertimbangkan aspek ekonomi dan kewirausahaan',
                    'Lingkungan': 'dengan fokus pada kelestarian lingkungan dan keberlanjutan',
                    'Sosial Budaya': 'dengan mengintegrasikan nilai-nilai sosial dan budaya lokal',
                    'Kesehatan': 'dengan memperhatikan aspek kesehatan dan kesejahteraan masyarakat',
                    'Seni & Budaya': 'dengan mengekspresikan kreativitas dan apresiasi seni budaya',
                    'Kewirausahaan': 'dengan mengembangkan jiwa wirausaha dan inovasi bisnis',
                    'Politik & Hukum': 'dengan memahami aspek hukum dan tata kelola yang baik'
                };

                const selectedIntegrations = lintasBidang.slice(0, 2).map(bidang => 
                    integrationPhrases[bidang] || `dengan mengintegrasikan aspek ${bidang.toLowerCase()}`
                );

                baseContext += ' ' + selectedIntegrations.join(' dan ');
            }

            // Enhance context with learning model
            if (modelPembelajaran) {
                const modelEnhancements = {
                    'Problem Based Learning': 'melalui identifikasi dan pemecahan masalah nyata secara sistematis',
                    'Project Based Learning': 'melalui pengerjaan proyek kolaboratif yang menghasilkan produk bermakna',
                    'Discovery Learning': 'melalui eksplorasi dan penemuan konsep secara mandiri dan aktif',
                    'Inquiry Learning': 'melalui penyelidikan dan penelitian yang mendalam dan terstruktur',
                    'STEAM': 'melalui pendekatan interdisipliner sains, teknologi, engineering, seni, dan matematika',
                    'Design Thinking': 'melalui proses desain kreatif untuk menghasilkan solusi inovatif',
                    'Gamification': 'melalui pendekatan permainan yang menyenangkan dan memotivasi'
                };

                const enhancement = modelEnhancements[modelPembelajaran] || 
                    `melalui pendekatan ${modelPembelajaran.toLowerCase()} yang interaktif`;
                baseContext += ' ' + enhancement;
            }

            return baseContext;
        }

        // Form submission handler with enhanced AI context
        document.getElementById('modulForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const mataPelajaran = document.getElementById('mataPelajaran').value;
            const kelas = document.getElementById('kelas').value;
            const topik = document.getElementById('topik').value;
            const tujuanPembelajaran = document.getElementById('tujuanPembelajaran').value;
            const metodePembelajaran = document.getElementById('metodePembelajaran').value;
            const modelPembelajaran = document.getElementById('modelPembelajaran').value;
            const alokasi = document.getElementById('alokasi').value;
            const jumlahSiswa = document.getElementById('jumlahSiswa').value;
            
            // Get selected lintas bidang
            const lintasBidang = Array.from(document.querySelectorAll('input[name="lintasBidang"]:checked')).map(cb => cb.value);
            const lintasBidangLainnya = document.getElementById('lintasBidangLainnya').value;
            if (lintasBidangLainnya) {
                lintasBidang.push(lintasBidangLainnya);
            }
            
            // Get selected sarana prasarana
            const saranaPrasarana = Array.from(document.querySelectorAll('input[name="sarana"]:checked')).map(cb => cb.value);
            
            // Get selected sumber belajar
            const sumberBelajar = Array.from(document.querySelectorAll('input[name="sumber"]:checked')).map(cb => cb.value);
            
            // Enhanced validation with specific messages
            const missingFields = [];
            if (!mataPelajaran) missingFields.push('Mata Pelajaran');
            if (!kelas) missingFields.push('Kelas');
            if (!topik) missingFields.push('Topik/Materi');
            if (!alokasi) missingFields.push('Alokasi Waktu');
            if (!jumlahSiswa) missingFields.push('Jumlah Siswa');
            
            if (missingFields.length > 0) {
                showMessage(`Mohon lengkapi field: ${missingFields.join(', ')}`, 'error');
                return;
            }
            
            // Validate student count
            if (jumlahSiswa < 1 || jumlahSiswa > 50) {
                showMessage('Jumlah siswa harus antara 1-50 orang', 'error');
                return;
            }
            
            generateModul(mataPelajaran, kelas, topik, tujuanPembelajaran, metodePembelajaran, modelPembelajaran, alokasi, jumlahSiswa, lintasBidang, saranaPrasarana, sumberBelajar);
        });

        function showMessage(message, type) {
            // Create enhanced message with glassmorphism
            const messageDiv = document.createElement('div');
            messageDiv.className = `fixed top-20 right-4 p-4 rounded-2xl text-white z-50 glass-card backdrop-blur-md border transition-all duration-300 transform translate-x-full ${type === 'error' ? 'bg-red-500/90 border-red-300' : 'bg-green-500/90 border-green-300'}`;
            messageDiv.innerHTML = `
                <div class="flex items-center space-x-3">
                    <span class="text-2xl">${type === 'error' ? '‚ùå' : '‚úÖ'}</span>
                    <span class="font-medium">${message}</span>
                </div>
            `;
            document.body.appendChild(messageDiv);
            
            // Animate in
            setTimeout(() => {
                messageDiv.classList.remove('translate-x-full');
            }, 100);
            
            // Animate out and remove
            setTimeout(() => {
                messageDiv.classList.add('translate-x-full');
                setTimeout(() => {
                    if (document.body.contains(messageDiv)) {
                        document.body.removeChild(messageDiv);
                    }
                }, 300);
            }, 3000);
        }

        function generateModul(mataPelajaran, kelas, topik, tujuanPembelajaran, metodePembelajaran, modelPembelajaran, alokasi, jumlahSiswa, lintasBidang, saranaPrasarana, sumberBelajar) {
            // Show loading state with enhanced animation
            const hasilSection = document.getElementById('hasilSection');
            const hasilModul = document.getElementById('hasilModul');
            
            hasilSection.classList.remove('hidden');
            hasilModul.innerHTML = `
                <div class="text-center py-12">
                    <div class="relative">
                        <div class="animate-spin rounded-full h-20 w-20 border-4 border-blue-200 border-t-blue-600 mx-auto mb-6"></div>
                        <div class="absolute inset-0 rounded-full h-20 w-20 border-4 border-purple-200 border-t-purple-600 mx-auto animate-spin" style="animation-direction: reverse; animation-duration: 1.5s;"></div>
                    </div>
                    <p class="text-xl font-semibold text-gray-700 mb-2">üß† AI sedang menganalisis dan membuat modul ajar enhanced...</p>
                    <p class="text-sm text-gray-500 mb-6">Mohon tunggu sebentar, proses enhanced membutuhkan waktu lebih lama</p>
                    <div class="space-y-3">
                        <div class="glass-card p-3 rounded-xl pulse-glow">
                            <div class="flex items-center justify-center space-x-3">
                                <div class="w-3 h-3 bg-blue-500 rounded-full animate-pulse"></div>
                                <span class="text-sm text-blue-600 font-medium">‚úÖ Menganalisis Profil Lulusan 8 Dimensi...</span>
                            </div>
                        </div>
                        <div class="glass-card p-3 rounded-xl pulse-glow" style="animation-delay: 0.5s;">
                            <div class="flex items-center justify-center space-x-3">
                                <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                                <span class="text-sm text-green-600 font-medium">‚úÖ Mengintegrasikan lintas bidang disiplin ilmu...</span>
                            </div>
                        </div>
                        <div class="glass-card p-3 rounded-xl pulse-glow" style="animation-delay: 1s;">
                            <div class="flex items-center justify-center space-x-3">
                                <div class="w-3 h-3 bg-purple-500 rounded-full animate-pulse"></div>
                                <span class="text-sm text-purple-600 font-medium">‚úÖ Menyusun diferensiasi pembelajaran...</span>
                            </div>
                        </div>
                        <div class="glass-card p-3 rounded-xl pulse-glow" style="animation-delay: 1.5s;">
                            <div class="flex items-center justify-center space-x-3">
                                <div class="w-3 h-3 bg-orange-500 rounded-full animate-pulse"></div>
                                <span class="text-sm text-orange-600 font-medium">‚úÖ Membuat rubrik penilaian komprehensif...</span>
                            </div>
                        </div>
                        <div class="glass-card p-3 rounded-xl pulse-glow" style="animation-delay: 2s;">
                            <div class="flex items-center justify-center space-x-3">
                                <div class="w-3 h-3 bg-pink-500 rounded-full animate-pulse"></div>
                                <span class="text-sm text-pink-600 font-medium">‚úÖ Generating AI contextual recommendations...</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Simulate AI processing with enhanced features
            setTimeout(() => {
                const modulContent = generateEnhancedModul(mataPelajaran, kelas, topik, tujuanPembelajaran, metodePembelajaran, modelPembelajaran, alokasi, jumlahSiswa, lintasBidang, saranaPrasarana, sumberBelajar);
                hasilModul.innerHTML = modulContent;
                hasilSection.scrollIntoView({ behavior: 'smooth' });
                showMessage('üéâ Modul Ajar Enhanced v13.0 berhasil dibuat dengan AI recommendations!', 'success');
            }, 4500);
        }

        function generateEnhancedModul(mataPelajaran, kelas, topik, tujuanPembelajaran, metodePembelajaran, modelPembelajaran, alokasi, jumlahSiswa, lintasBidang, saranaPrasarana, sumberBelajar) {
            
            // AI Recommendations for empty fields
            function getAIRecommendations() {
                const recommendations = {};
                
                // AI Lintas Bidang Recommendations
                if (lintasBidang.length === 0) {
                    const lintasBidangAI = {
                        'Matematika': ['Teknologi', 'Ekonomi', 'Seni & Budaya'],
                        'IPA': ['Teknologi', 'Lingkungan', 'Kesehatan'],
                        'Bahasa Indonesia': ['Sosial Budaya', 'Seni & Budaya', 'Teknologi'],
                        'IPS': ['Ekonomi', 'Sosial Budaya', 'Politik & Hukum'],
                        'Teknik Komputer Jaringan': ['Teknologi', 'Kewirausahaan', 'Ekonomi'],
                        'Tata Boga': ['Kesehatan', 'Kewirausahaan', 'Sosial Budaya']
                    };
                    recommendations.lintasBidang = lintasBidangAI[mataPelajaran] || ['Teknologi', 'Sosial Budaya'];
                }
                
                // AI Sarana Prasarana Recommendations
                if (saranaPrasarana.length === 0) {
                    const saranaPrasaranaAI = {
                        'Problem Based Learning': ['Laptop/Komputer', 'Internet', 'Proyektor'],
                        'Project Based Learning': ['Laptop/Komputer', 'Internet', 'Alat Peraga'],
                        'STEAM': ['Lab', 'Laptop/Komputer', 'Alat Peraga'],
                        'Gamification': ['Laptop/Komputer', 'Internet', 'Proyektor'],
                        'Outdoor Learning': ['Alat Peraga', 'Proyektor']
                    };
                    recommendations.saranaPrasarana = saranaPrasaranaAI[modelPembelajaran] || ['Proyektor', 'Alat Peraga'];
                }
                
                // AI Sumber Belajar Recommendations
                if (sumberBelajar.length === 0) {
                    const sumberBelajarAI = {
                        'SD': ['Buku Teks', 'Video Pembelajaran', 'Alat Peraga'],
                        'SMP': ['Buku Teks', 'Video Pembelajaran', 'Website Edukatif'],
                        'SMA': ['Buku Teks', 'Artikel Jurnal', 'Website Edukatif'],
                        'SMK': ['Video Pembelajaran', 'Narasumber Ahli', 'Website Edukatif']
                    };
                    const jenjang = kelas.includes('I') || kelas.includes('II') || kelas.includes('III') || kelas.includes('IV') || kelas.includes('V') || kelas.includes('VI') ? 'SD' :
                                  kelas.includes('VII') || kelas.includes('VIII') || kelas.includes('IX') ? 'SMP' :
                                  kelas.includes('SMK') ? 'SMK' : 'SMA';
                    recommendations.sumberBelajar = sumberBelajarAI[jenjang] || ['Buku Teks', 'Video Pembelajaran'];
                }
                
                return recommendations;
            }
            
            const aiRecommendations = getAIRecommendations();
            
            // Generate AI-enhanced contextual learning
            const finalLintasBidang = lintasBidang.length > 0 ? lintasBidang : aiRecommendations.lintasBidang || [];
            const kontekstual = generateAIContext(mataPelajaran, kelas, topik, finalLintasBidang, modelPembelajaran);

            // Generate AI Content
            const pertanyaanPemantik = generatePertanyaanPemantik(mataPelajaran, topik, kontekstual);
            const asesmen = generateAsesmen(mataPelajaran, topik, modelPembelajaran);
            const diferensiasi = generateDiferensiasi(kelas, jumlahSiswa);
            const remedialPengayaan = generateRemedialPengayaan(mataPelajaran, topik);
            const rubrikPenilaian = generateRubrikPenilaian(topik);
            const refleksiGuru = generateRefleksiGuru();

            // Generate cross-disciplinary connections with AI recommendations
            const lintasBidangText = finalLintasBidang.length > 0 ? finalLintasBidang.join(', ') : 'Tidak ada integrasi lintas bidang';
            
            // Generate resource requirements with AI recommendations
            const finalSaranaPrasarana = saranaPrasarana.length > 0 ? saranaPrasarana : aiRecommendations.saranaPrasarana || [];
            const saranaPrasaranaText = finalSaranaPrasarana.length > 0 ? finalSaranaPrasarana.join(', ') : 'Sarana standar kelas';
            
            const finalSumberBelajar = sumberBelajar.length > 0 ? sumberBelajar : aiRecommendations.sumberBelajar || [];
            const sumberBelajarText = finalSumberBelajar.length > 0 ? finalSumberBelajar.join(', ') : 'Buku teks standar';

            return `
                <div class="space-y-8">
                    <!-- Header Modul -->
                    <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-xl">
                        <h3 class="text-2xl font-bold mb-2">üìö MODUL AJAR ${mataPelajaran.toUpperCase()} ENHANCED</h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                            <div><strong>Kelas:</strong> ${kelas}</div>
                            <div><strong>Topik:</strong> ${topik}</div>
                            <div><strong>Alokasi:</strong> ${alokasi}</div>
                            <div><strong>Siswa:</strong> ${jumlahSiswa} orang</div>
                        </div>
                        <div class="mt-3 space-y-2">
                            ${metodePembelajaran ? `<div class="bg-white/20 p-3 rounded-lg"><strong>üìã Metode:</strong> ${metodePembelajaran}</div>` : ''}
                            ${modelPembelajaran ? `<div class="bg-white/20 p-3 rounded-lg"><strong>üöÄ Model:</strong> ${modelPembelajaran}</div>` : ''}
                        </div>
                    </div>

                    <!-- AI Enhanced Contextual Learning -->
                    <div class="bg-gradient-to-br from-cyan-50 to-cyan-100 p-6 rounded-xl border-l-4 border-cyan-500">
                        <h4 class="text-xl font-bold text-cyan-800 mb-4 flex items-center">
                            ü§ñ AI Enhanced Contextual Learning
                            <span class="ml-2 bg-gradient-to-r from-cyan-500 to-blue-500 text-white px-2 py-1 rounded text-xs">AI GENERATED</span>
                        </h4>
                        <div class="bg-white p-4 rounded-lg border border-cyan-200">
                            <h5 class="font-semibold text-cyan-700 mb-2">Konteks Pembelajaran AI:</h5>
                            <p class="text-cyan-600 leading-relaxed">${kontekstual}</p>
                            <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                                <div>
                                    <h6 class="font-medium text-cyan-700 mb-1">üéØ Learning Outcomes:</h6>
                                    <ul class="text-cyan-600 space-y-1">
                                        <li>‚Ä¢ Pemahaman konsep ${topik} dalam konteks nyata</li>
                                        <li>‚Ä¢ Pengembangan keterampilan abad 21</li>
                                        <li>‚Ä¢ Integrasi nilai-nilai karakter dan profil lulusan</li>
                                    </ul>
                                </div>
                                <div>
                                    <h6 class="font-medium text-cyan-700 mb-1">üåü Real-world Impact:</h6>
                                    <ul class="text-cyan-600 space-y-1">
                                        <li>‚Ä¢ Solusi untuk masalah komunitas</li>
                                        <li>‚Ä¢ Pengembangan kesadaran sosial</li>
                                        <li>‚Ä¢ Persiapan menghadapi tantangan masa depan</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Profil Lulusan Deep Learning -->
                    <div class="bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-xl border-l-4 border-purple-500">
                        <h4 class="text-xl font-bold text-purple-800 mb-4 flex items-center">
                            üéì Profil Lulusan Deep Learning yang Dikembangkan
                        </h4>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-3 text-sm">
                            <div class="flex items-center space-x-2">
                                <span>üôè</span>
                                <span>Keimanan & Ketakwaan</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span>üß†</span>
                                <span>Penalaran Kritis</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span>üé®</span>
                                <span>Kreativitas & Inovasi</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span>ü§ù</span>
                                <span>Kolaborasi Global</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span>üåç</span>
                                <span>Kewargaan Digital</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span>üí™</span>
                                <span>Kemandirian Belajar</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span>üèÉ</span>
                                <span>Kesehatan Holistik</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span>üí¨</span>
                                <span>Komunikasi Efektif</span>
                            </div>
                        </div>
                    </div>

                    <!-- Tujuan Pembelajaran -->
                    <div class="bg-green-50 p-6 rounded-xl border-l-4 border-green-500">
                        <h4 class="text-xl font-bold text-green-800 mb-3">üéØ Tujuan Pembelajaran Spesifik</h4>
                        <div class="space-y-3 text-green-700">
                            ${tujuanPembelajaran ? `<div class="bg-white p-3 rounded-lg border border-green-200"><strong>Tujuan Khusus:</strong> ${tujuanPembelajaran}</div>` : ''}
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                <div>
                                    <h5 class="font-semibold mb-2">Tujuan Kognitif:</h5>
                                    <ul class="space-y-1 text-sm">
                                        <li>‚Ä¢ Menganalisis konsep ${topik} secara mendalam</li>
                                        <li>‚Ä¢ Mengevaluasi penerapan dalam konteks: ${kontekstual.substring(0, 80)}...</li>
                                        <li>‚Ä¢ Mensintesis solusi inovatif berbasis kearifan lokal</li>
                                    </ul>
                                </div>
                                <div>
                                    <h5 class="font-semibold mb-2">Tujuan Afektif & Psikomotorik:</h5>
                                    <ul class="space-y-1 text-sm">
                                        <li>‚Ä¢ Mengembangkan sikap kritis dan kreatif</li>
                                        <li>‚Ä¢ Berkolaborasi efektif dalam tim multidisipliner</li>
                                        <li>‚Ä¢ Mengomunikasikan hasil dengan percaya diri</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Lintas Bidang Disiplin Ilmu -->
                    <div class="bg-indigo-50 p-6 rounded-xl border-l-4 border-indigo-500">
                        <h4 class="text-xl font-bold text-indigo-800 mb-3 flex items-center">
                            üåê Integrasi Lintas Bidang Disiplin Ilmu
                            ${lintasBidang.length === 0 ? '<span class="ml-2 bg-gradient-to-r from-indigo-500 to-blue-500 text-white px-2 py-1 rounded text-xs">AI RECOMMENDED</span>' : ''}
                        </h4>
                        <div class="bg-white p-4 rounded-lg border border-indigo-200">
                            <p class="text-indigo-700 mb-3"><strong>Bidang Terintegrasi:</strong> ${lintasBidangText}</p>
                            <div class="text-sm text-indigo-600">
                                <p><strong>Konteks Pembelajaran:</strong> ${kontekstual}</p>
                                <p class="mt-2"><strong>Manfaat Integrasi:</strong> Siswa memperoleh pemahaman holistik dan dapat melihat keterkaitan antar disiplin ilmu dalam menyelesaikan masalah nyata.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Sarana Prasarana & Sumber Belajar -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-orange-50 p-6 rounded-xl border-l-4 border-orange-500">
                            <h4 class="text-xl font-bold text-orange-800 mb-3 flex items-center">
                                üõ†Ô∏è Sarana & Prasarana
                                ${saranaPrasarana.length === 0 ? '<span class="ml-2 bg-gradient-to-r from-orange-500 to-red-500 text-white px-2 py-1 rounded text-xs">AI</span>' : ''}
                            </h4>
                            <div class="space-y-3">
                                <div class="bg-white p-3 rounded-lg">
                                    <h5 class="font-semibold text-orange-700 mb-2">Kebutuhan Utama:</h5>
                                    <p class="text-orange-600 text-sm">${saranaPrasaranaText}</p>
                                </div>
                                <div class="space-y-2 text-sm text-orange-600">
                                    ${finalSaranaPrasarana.includes('Laptop/Komputer') ? '<div class="flex items-center space-x-2"><span>üíª</span><span>Laptop/Komputer untuk setiap kelompok</span></div>' : ''}
                                    ${finalSaranaPrasarana.includes('Proyektor') ? '<div class="flex items-center space-x-2"><span>üìΩÔ∏è</span><span>Proyektor & layar untuk presentasi</span></div>' : ''}
                                    ${finalSaranaPrasarana.includes('Internet') ? '<div class="flex items-center space-x-2"><span>üåê</span><span>Akses internet stabil untuk riset</span></div>' : ''}
                                    ${finalSaranaPrasarana.includes('Lab') ? '<div class="flex items-center space-x-2"><span>üî¨</span><span>Laboratorium untuk eksperimen</span></div>' : ''}
                                    ${finalSaranaPrasarana.includes('Alat Peraga') ? '<div class="flex items-center space-x-2"><span>üéØ</span><span>Alat peraga dan manipulatif</span></div>' : ''}
                                </div>
                            </div>
                        </div>
                        <div class="bg-teal-50 p-6 rounded-xl border-l-4 border-teal-500">
                            <h4 class="text-xl font-bold text-teal-800 mb-3 flex items-center">
                                üìö Sumber Belajar
                                ${sumberBelajar.length === 0 ? '<span class="ml-2 bg-gradient-to-r from-teal-500 to-green-500 text-white px-2 py-1 rounded text-xs">AI</span>' : ''}
                            </h4>
                            <div class="space-y-3">
                                <div class="bg-white p-3 rounded-lg">
                                    <h5 class="font-semibold text-teal-700 mb-2">Sumber Utama:</h5>
                                    <p class="text-teal-600 text-sm">${sumberBelajarText}</p>
                                </div>
                                <div class="space-y-2 text-sm text-teal-600">
                                    ${finalSumberBelajar.includes('Buku Teks') ? '<div class="flex items-center space-x-2"><span>üìñ</span><span>Buku teks kurikulum terbaru</span></div>' : ''}
                                    ${finalSumberBelajar.includes('Video Pembelajaran') ? '<div class="flex items-center space-x-2"><span>üé•</span><span>Video pembelajaran interaktif</span></div>' : ''}
                                    ${finalSumberBelajar.includes('Artikel Jurnal') ? '<div class="flex items-center space-x-2"><span>üìÑ</span><span>Artikel jurnal dan penelitian terkini</span></div>' : ''}
                                    ${finalSumberBelajar.includes('Website Edukatif') ? '<div class="flex items-center space-x-2"><span>üåê</span><span>Platform pembelajaran online</span></div>' : ''}
                                    ${finalSumberBelajar.includes('Narasumber Ahli') ? '<div class="flex items-center space-x-2"><span>üë®‚Äçüè´</span><span>Narasumber ahli dan praktisi</span></div>' : ''}
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Enhanced Structured Learning Steps Table -->
                    <div class="bg-blue-50 p-6 rounded-xl border-l-4 border-blue-500">
                        <h4 class="text-xl font-bold text-blue-800 mb-4 flex items-center">
                            üìã Langkah Pembelajaran Terstruktur (${modelPembelajaran || 'Standar'})
                            <span class="ml-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-2 py-1 rounded text-xs">EDITABLE TABLE</span>
                        </h4>
                        <div class="overflow-x-auto">
                            <table class="w-full border-collapse border-2 border-blue-300 bg-white rounded-lg shadow-lg">
                                <thead>
                                    <tr class="bg-gradient-to-r from-blue-100 to-blue-200">
                                        <th class="border-2 border-blue-300 px-4 py-3 text-left font-bold text-blue-800 w-1/6">TAHAP PEMBELAJARAN</th>
                                        <th class="border-2 border-blue-300 px-4 py-3 text-center font-bold text-blue-800 w-1/12">WAKTU</th>
                                        <th class="border-2 border-blue-300 px-4 py-3 text-left font-bold text-blue-800 w-1/3">KEGIATAN GURU</th>
                                        <th class="border-2 border-blue-300 px-4 py-3 text-left font-bold text-blue-800 w-1/3">KEGIATAN SISWA</th>
                                        <th class="border-2 border-blue-300 px-4 py-3 text-left font-bold text-blue-800 w-1/6">MEDIA/SUMBER</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="hover:bg-blue-25 transition-colors">
                                        <td class="border-2 border-blue-300 px-4 py-4 font-bold text-blue-700 bg-blue-50">
                                            üöÄ PENDAHULUAN<br>
                                            <span class="text-sm font-normal">(Opening)</span>
                                        </td>
                                        <td class="border-2 border-blue-300 px-4 py-4 text-center font-semibold text-blue-600">
                                            10<br>menit
                                        </td>
                                        <td class="border-2 border-blue-300 px-4 py-4 text-sm">
                                            <div class="space-y-2">
                                                <div><strong>1. Pembukaan:</strong> Mengucapkan salam, berdoa, dan mengecek kehadiran siswa</div>
                                                <div><strong>2. Apersepsi:</strong> Menghubungkan materi ${topik} dengan pengalaman siswa sehari-hari</div>
                                                <div><strong>3. Orientasi:</strong> Menyampaikan tujuan pembelajaran dan profil lulusan yang akan dikembangkan</div>
                                                <div><strong>4. Motivasi:</strong> Mengajukan pertanyaan pemantik kontekstual terkait ${kontekstual.substring(0, 50)}...</div>
                                            </div>
                                        </td>
                                        <td class="border-2 border-blue-300 px-4 py-4 text-sm">
                                            <div class="space-y-2">
                                                <div>‚Ä¢ Menjawab salam, berdoa, dan merespon pengecekan kehadiran</div>
                                                <div>‚Ä¢ Mendengarkan dan merespon apersepsi dengan berbagi pengalaman terkait ${topik}</div>
                                                <div>‚Ä¢ Memperhatikan tujuan pembelajaran dan mengidentifikasi profil lulusan yang akan dikembangkan</div>
                                                <div>‚Ä¢ Merespon pertanyaan pemantik dan mengajukan pertanyaan awal</div>
                                            </div>
                                        </td>
                                        <td class="border-2 border-blue-300 px-4 py-4 text-sm">
                                            <div class="space-y-1">
                                                <div>üìΩÔ∏è Proyektor</div>
                                                <div>üì± Smartphone</div>
                                                <div>üéØ Slide presentasi</div>
                                                <div>üìã Daftar hadir</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-green-25 transition-colors">
                                        <td class="border-2 border-blue-300 px-4 py-4 font-bold text-green-700 bg-green-50">
                                            üéØ KEGIATAN INTI<br>
                                            <span class="text-sm font-normal">(Core Activity)</span>
                                        </td>
                                        <td class="border-2 border-blue-300 px-4 py-4 text-center font-semibold text-green-600">
                                            ${parseInt(alokasi.split(' ')[0]) * 40 - 20}<br>menit
                                        </td>
                                        <td class="border-2 border-blue-300 px-4 py-4 text-sm">
                                            <div class="space-y-3">
                                                <div class="bg-blue-100 p-2 rounded">
                                                    <strong class="text-blue-700">üîç FASE EKSPLORASI (${Math.floor((parseInt(alokasi.split(' ')[0]) * 40 - 20) / 3)} menit)</strong>
                                                    <ul class="mt-1 space-y-1 text-xs">
                                                        <li>‚Ä¢ Memfasilitasi siswa mengamati fenomena terkait ${topik}</li>
                                                        <li>‚Ä¢ Membimbing identifikasi masalah dalam konteks kehidupan nyata</li>
                                                        <li>‚Ä¢ Mendorong siswa mengajukan hipotesis dan pertanyaan penelitian</li>
                                                        <li>‚Ä¢ Memfasilitasi aktivasi prior knowledge melalui diskusi</li>
                                                    </ul>
                                                </div>
                                                <div class="bg-green-100 p-2 rounded">
                                                    <strong class="text-green-700">üî¨ FASE ELABORASI (${Math.floor((parseInt(alokasi.split(' ')[0]) * 40 - 20) / 3)} menit)</strong>
                                                    <ul class="mt-1 space-y-1 text-xs">
                                                        <li>‚Ä¢ Memfasilitasi ${metodePembelajaran || 'diskusi kelompok'} dengan pendekatan ${modelPembelajaran || 'kolaboratif'}</li>
                                                        <li>‚Ä¢ Membimbing pencarian informasi dari sumber: ${sumberBelajarText}</li>
                                                        <li>‚Ä¢ Mendorong analisis data dan informasi secara kritis</li>
                                                        <li>‚Ä¢ Memfasilitasi integrasi perspektif lintas bidang: ${lintasBidangText}</li>
                                                    </ul>
                                                </div>
                                                <div class="bg-purple-100 p-2 rounded">
                                                    <strong class="text-purple-700">‚úÖ FASE KONFIRMASI (${Math.floor((parseInt(alokasi.split(' ')[0]) * 40 - 20) / 3)} menit)</strong>
                                                    <ul class="mt-1 space-y-1 text-xs">
                                                        <li>‚Ä¢ Memfasilitasi presentasi hasil kelompok dengan media: ${saranaPrasaranaText}</li>
                                                        <li>‚Ä¢ Memberikan klarifikasi dan penguatan konsep</li>
                                                        <li>‚Ä¢ Melakukan evaluasi pemahaman melalui asesmen formatif</li>
                                                        <li>‚Ä¢ Memfasilitasi refleksi pembelajaran dan koneksi dengan profil lulusan</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="border-2 border-blue-300 px-4 py-4 text-sm">
                                            <div class="space-y-3">
                                                <div class="bg-blue-100 p-2 rounded">
                                                    <strong class="text-blue-700">üîç EKSPLORASI</strong>
                                                    <ul class="mt-1 space-y-1 text-xs">
                                                        <li>‚Ä¢ Mengamati dan mengidentifikasi fenomena terkait ${topik}</li>
                                                        <li>‚Ä¢ Merumuskan masalah berdasarkan konteks kehidupan nyata</li>
                                                        <li>‚Ä¢ Mengajukan hipotesis dan pertanyaan penelitian</li>
                                                        <li>‚Ä¢ Berbagi pengetahuan awal melalui diskusi kelompok</li>
                                                    </ul>
                                                </div>
                                                <div class="bg-green-100 p-2 rounded">
                                                    <strong class="text-green-700">üî¨ ELABORASI</strong>
                                                    <ul class="mt-1 space-y-1 text-xs">
                                                        <li>‚Ä¢ Berpartisipasi aktif dalam ${metodePembelajaran || 'diskusi kelompok'}</li>
                                                        <li>‚Ä¢ Mencari dan mengumpulkan informasi dari berbagai sumber</li>
                                                        <li>‚Ä¢ Menganalisis data dan informasi secara kolaboratif</li>
                                                        <li>‚Ä¢ Mengintegrasikan perspektif dari berbagai bidang ilmu</li>
                                                    </ul>
                                                </div>
                                                <div class="bg-purple-100 p-2 rounded">
                                                    <strong class="text-purple-700">‚úÖ KONFIRMASI</strong>
                                                    <ul class="mt-1 space-y-1 text-xs">
                                                        <li>‚Ä¢ Mempresentasikan hasil kerja kelompok dengan percaya diri</li>
                                                        <li>‚Ä¢ Memberikan tanggapan dan masukan terhadap presentasi kelompok lain</li>
                                                        <li>‚Ä¢ Mengerjakan asesmen formatif untuk evaluasi pemahaman</li>
                                                        <li>‚Ä¢ Melakukan refleksi pembelajaran dan mengaitkan dengan profil lulusan</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="border-2 border-blue-300 px-4 py-4 text-sm">
                                            <div class="space-y-1">
                                                <div>üíª ${saranaPrasaranaText}</div>
                                                <div>üìö ${sumberBelajarText}</div>
                                                <div>üéØ LKPD Enhanced</div>
                                                <div>üìä Platform digital</div>
                                                <div>üî¨ Alat eksperimen</div>
                                                <div>üì± Aplikasi pembelajaran</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-orange-25 transition-colors">
                                        <td class="border-2 border-blue-300 px-4 py-4 font-bold text-orange-700 bg-orange-50">
                                            üéâ PENUTUP<br>
                                            <span class="text-sm font-normal">(Closing)</span>
                                        </td>
                                        <td class="border-2 border-blue-300 px-4 py-4 text-center font-semibold text-orange-600">
                                            10<br>menit
                                        </td>
                                        <td class="border-2 border-blue-300 px-4 py-4 text-sm">
                                            <div class="space-y-2">
                                                <div><strong>1. Refleksi:</strong> Memfasilitasi refleksi pembelajaran bersama siswa tentang pencapaian tujuan</div>
                                                <div><strong>2. Kesimpulan:</strong> Membimbing siswa menyimpulkan materi dan kaitannya dengan kehidupan nyata</div>
                                                <div><strong>3. Tindak Lanjut:</strong> Memberikan tugas atau rencana pembelajaran berikutnya</div>
                                                <div><strong>4. Penutupan:</strong> Doa penutup dan salam</div>
                                            </div>
                                        </td>
                                        <td class="border-2 border-blue-300 px-4 py-4 text-sm">
                                            <div class="space-y-2">
                                                <div>‚Ä¢ Melakukan refleksi tentang pembelajaran yang telah dilakukan dan pencapaian tujuan</div>
                                                <div>‚Ä¢ Menyimpulkan materi ${topik} dan mengaitkan dengan kehidupan sehari-hari</div>
                                                <div>‚Ä¢ Mencatat tugas dan mempersiapkan pembelajaran berikutnya</div>
                                                <div>‚Ä¢ Berdoa dan menjawab salam penutup</div>
                                            </div>
                                        </td>
                                        <td class="border-2 border-blue-300 px-4 py-4 text-sm">
                                            <div class="space-y-1">
                                                <div>üìù Lembar refleksi</div>
                                                <div>üìã Checklist tujuan</div>
                                                <div>üìö Buku tugas</div>
                                                <div>üéØ Slide kesimpulan</div>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                            <div class="bg-blue-100 p-3 rounded-lg">
                                <h6 class="font-semibold text-blue-800 mb-2">üìù Catatan Penting:</h6>
                                <ul class="text-blue-700 space-y-1">
                                    <li>‚Ä¢ Sesuaikan waktu dengan kondisi dan kemampuan siswa</li>
                                    <li>‚Ä¢ Pastikan semua siswa terlibat aktif dalam pembelajaran</li>
                                    <li>‚Ä¢ Gunakan diferensiasi sesuai kebutuhan individual siswa</li>
                                    <li>‚Ä¢ Integrasikan teknologi untuk meningkatkan engagement</li>
                                </ul>
                            </div>
                            <div class="bg-green-100 p-3 rounded-lg">
                                <h6 class="font-semibold text-green-800 mb-2">üéØ Indikator Keberhasilan:</h6>
                                <ul class="text-green-700 space-y-1">
                                    <li>‚Ä¢ Siswa aktif berpartisipasi dalam setiap fase pembelajaran</li>
                                    <li>‚Ä¢ Tercapainya tujuan pembelajaran yang telah ditetapkan</li>
                                    <li>‚Ä¢ Siswa mampu mengaitkan materi dengan kehidupan nyata</li>
                                    <li>‚Ä¢ Berkembangnya 8 dimensi profil lulusan secara optimal</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Pertanyaan Pemantik AI Generated -->
                    <div class="bg-cyan-50 p-6 rounded-xl border-l-4 border-cyan-500">
                        <h4 class="text-xl font-bold text-cyan-800 mb-4 flex items-center">
                            üí° Pertanyaan Pemantik (AI Generated)
                            <span class="ml-2 bg-gradient-to-r from-cyan-500 to-blue-500 text-white px-2 py-1 rounded text-xs">AI CONTENT</span>
                        </h4>
                        <div class="grid grid-cols-1 gap-3">
                            ${pertanyaanPemantik.map((pertanyaan, index) => `
                                <div class="bg-white p-3 rounded-lg border border-cyan-200">
                                    <span class="font-semibold text-cyan-700">${index + 1}. </span>
                                    <span class="text-cyan-600">${pertanyaan}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Asesmen Lengkap AI Generated -->
                    <div class="bg-rose-50 p-6 rounded-xl border-l-4 border-rose-500">
                        <h4 class="text-xl font-bold text-rose-800 mb-4 flex items-center">
                            üìä Asesmen Lengkap (AI Generated)
                            <span class="ml-2 bg-gradient-to-r from-rose-500 to-pink-500 text-white px-2 py-1 rounded text-xs">COMPLETE</span>
                        </h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="bg-white p-4 rounded-lg border border-rose-200">
                                <h5 class="font-semibold text-rose-700 mb-3 flex items-center">
                                    <span class="mr-2">üìù</span> Asesmen Formatif
                                </h5>
                                <ul class="text-sm text-rose-600 space-y-2">
                                    ${asesmen.formatif.map(item => `<li>‚Ä¢ ${item}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="bg-white p-4 rounded-lg border border-rose-200">
                                <h5 class="font-semibold text-rose-700 mb-3 flex items-center">
                                    <span class="mr-2">üìã</span> Asesmen Sumatif
                                </h5>
                                <ul class="text-sm text-rose-600 space-y-2">
                                    ${asesmen.sumatif.map(item => `<li>‚Ä¢ ${item}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="bg-white p-4 rounded-lg border border-rose-200">
                                <h5 class="font-semibold text-rose-700 mb-3 flex items-center">
                                    <span class="mr-2">üéØ</span> Asesmen Autentik
                                </h5>
                                <ul class="text-sm text-rose-600 space-y-2">
                                    ${asesmen.autentik.map(item => `<li>‚Ä¢ ${item}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Diferensiasi Pembelajaran -->
                    <div class="bg-violet-50 p-6 rounded-xl border-l-4 border-violet-500">
                        <h4 class="text-xl font-bold text-violet-800 mb-4">üé® Diferensiasi Pembelajaran</h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="bg-white p-4 rounded-lg border border-violet-200">
                                <h5 class="font-semibold text-violet-700 mb-3">üìö Diferensiasi Konten</h5>
                                <ul class="text-sm text-violet-600 space-y-2">
                                    ${diferensiasi.konten.map(item => `<li>‚Ä¢ ${item}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="bg-white p-4 rounded-lg border border-violet-200">
                                <h5 class="font-semibold text-violet-700 mb-3">‚öôÔ∏è Diferensiasi Proses</h5>
                                <ul class="text-sm text-violet-600 space-y-2">
                                    ${diferensiasi.proses.map(item => `<li>‚Ä¢ ${item}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="bg-white p-4 rounded-lg border border-violet-200">
                                <h5 class="font-semibold text-violet-700 mb-3">üéÅ Diferensiasi Produk</h5>
                                <ul class="text-sm text-violet-600 space-y-2">
                                    ${diferensiasi.produk.map(item => `<li>‚Ä¢ ${item}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Remedial & Pengayaan -->
                    <div class="bg-amber-50 p-6 rounded-xl border-l-4 border-amber-500">
                        <h4 class="text-xl font-bold text-amber-800 mb-4">üîÑ Program Remedial & Pengayaan</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="bg-white p-4 rounded-lg border border-amber-200">
                                <h5 class="font-semibold text-amber-700 mb-3 flex items-center">
                                    <span class="mr-2">üîß</span> Program Remedial
                                </h5>
                                <ul class="text-sm text-amber-600 space-y-2">
                                    ${remedialPengayaan.remedial.map(item => `<li>‚Ä¢ ${item}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="bg-white p-4 rounded-lg border border-amber-200">
                                <h5 class="font-semibold text-amber-700 mb-3 flex items-center">
                                    <span class="mr-2">üöÄ</span> Program Pengayaan
                                </h5>
                                <ul class="text-sm text-amber-600 space-y-2">
                                    ${remedialPengayaan.pengayaan.map(item => `<li>‚Ä¢ ${item}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Rubrik Penilaian -->
                    <div class="bg-teal-50 p-6 rounded-xl border-l-4 border-teal-500">
                        <h4 class="text-xl font-bold text-teal-800 mb-4">üìè Rubrik Penilaian Enhanced</h4>
                        <div class="overflow-x-auto">
                            <table class="w-full border-collapse border border-teal-300 bg-white rounded-lg">
                                <thead>
                                    <tr class="bg-teal-100">
                                        <th class="border border-teal-300 px-4 py-3 text-left font-semibold text-teal-800">Aspek Penilaian</th>
                                        <th class="border border-teal-300 px-4 py-3 text-center font-semibold text-teal-800">Sangat Baik (4)</th>
                                        <th class="border border-teal-300 px-4 py-3 text-center font-semibold text-teal-800">Baik (3)</th>
                                        <th class="border border-teal-300 px-4 py-3 text-center font-semibold text-teal-800">Cukup (2)</th>
                                        <th class="border border-teal-300 px-4 py-3 text-center font-semibold text-teal-800">Perlu Bimbingan (1)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${rubrikPenilaian.kriteria.map((kriteria, index) => `
                                        <tr class="${index % 2 === 0 ? 'bg-teal-25' : ''}">
                                            <td class="border border-teal-300 px-4 py-3 font-semibold text-teal-700">${kriteria.aspek}</td>
                                            <td class="border border-teal-300 px-4 py-3 text-sm">${kriteria.sangat_baik}</td>
                                            <td class="border border-teal-300 px-4 py-3 text-sm">${kriteria.baik}</td>
                                            <td class="border border-teal-300 px-4 py-3 text-sm">${kriteria.cukup}</td>
                                            <td class="border border-teal-300 px-4 py-3 text-sm">${kriteria.perlu_bimbingan}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Refleksi Guru -->
                    <div class="bg-indigo-50 p-6 rounded-xl border-l-4 border-indigo-500">
                        <h4 class="text-xl font-bold text-indigo-800 mb-4">ü§î Refleksi Guru (8 Pertanyaan Kunci Enhanced)</h4>
                        <div class="grid grid-cols-1 gap-3">
                            ${refleksiGuru.map((pertanyaan, index) => `
                                <div class="bg-white p-4 rounded-lg border border-indigo-200">
                                    <div class="flex items-start space-x-3">
                                        <span class="bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full text-sm font-semibold">${index + 1}</span>
                                        <p class="text-indigo-700 flex-1">${pertanyaan}</p>
                                    </div>
                                    <div class="mt-3 ml-8">
                                        <textarea class="w-full p-2 border border-indigo-200 rounded-lg text-sm" rows="2" placeholder="Tulis refleksi Anda di sini..."></textarea>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- AI Analysis Enhanced -->
                    <div class="bg-gradient-to-br from-gray-50 to-gray-100 p-6 rounded-xl border border-gray-200">
                        <h4 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                            ü§ñ AI Analysis Enhanced v13.0
                            <span class="ml-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-2 py-1 rounded text-xs">PREMIUM AI</span>
                        </h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="space-y-3">
                                <h5 class="font-semibold text-gray-700">üìä Quality Metrics</h5>
                                <div class="space-y-2 text-sm text-gray-600">
                                    <div class="flex justify-between">
                                        <span>Completeness Score:</span>
                                        <span class="font-medium text-green-600">95/100</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Alignment with Kurikulum Merdeka:</span>
                                        <span class="font-medium text-blue-600">Excellent</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Differentiation Level:</span>
                                        <span class="font-medium text-purple-600">Advanced</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Assessment Quality:</span>
                                        <span class="font-medium text-orange-600">High</span>
                                    </div>
                                </div>
                            </div>
                            <div class="space-y-3">
                                <h5 class="font-semibold text-gray-700">üéØ Enhancement Features</h5>
                                <div class="space-y-2 text-sm">
                                    <div class="flex items-center justify-between">
                                        <span>8 Dimensi Integration:</span>
                                        <div class="flex items-center space-x-1">
                                            <div class="w-16 h-2 bg-gray-200 rounded-full">
                                                <div class="w-15 h-2 bg-green-500 rounded-full"></div>
                                            </div>
                                            <span class="text-xs">100%</span>
                                        </div>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span>Cross-disciplinary:</span>
                                        <div class="flex items-center space-x-1">
                                            <div class="w-16 h-2 bg-gray-200 rounded-full">
                                                <div class="w-14 h-2 bg-blue-500 rounded-full"></div>
                                            </div>
                                            <span class="text-xs">90%</span>
                                        </div>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span>AI Recommendations:</span>
                                        <div class="flex items-center space-x-1">
                                            <div class="w-16 h-2 bg-gray-200 rounded-full">
                                                <div class="w-15 h-2 bg-purple-500 rounded-full"></div>
                                            </div>
                                            <span class="text-xs">98%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="space-y-3">
                                <h5 class="font-semibold text-gray-700">üöÄ Innovation Level</h5>
                                <div class="space-y-2 text-sm text-gray-600">
                                    <div class="flex justify-between">
                                        <span>Contextual Learning:</span>
                                        <span class="font-medium text-red-600">Advanced</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Technology Integration:</span>
                                        <span class="font-medium text-green-600">High</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>21st Century Skills:</span>
                                        <span class="font-medium text-blue-600">Excellent</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Future Readiness:</span>
                                        <span class="font-medium text-purple-600">Outstanding</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="p-4 bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg border-l-4 border-blue-500">
                                <h6 class="font-semibold text-blue-800 mb-2">‚úÖ Enhanced Features Detected</h6>
                                <ul class="text-sm text-blue-700 space-y-1">
                                    <li>‚Ä¢ ‚úÖ Profil Lulusan 8 Dimensi terintegrasi penuh</li>
                                    <li>‚Ä¢ ‚úÖ Lintas bidang disiplin ilmu: ${lintasBidangText}</li>
                                    <li>‚Ä¢ ‚úÖ AI-generated contextual learning recommendations</li>
                                    <li>‚Ä¢ ‚úÖ Structured learning table (editable format)</li>
                                    <li>‚Ä¢ ‚úÖ Asesmen formatif, sumatif, dan autentik lengkap</li>
                                    <li>‚Ä¢ ‚úÖ Diferensiasi pembelajaran komprehensif</li>
                                    <li>‚Ä¢ ‚úÖ Program remedial dan pengayaan spesifik</li>
                                </ul>
                            </div>
                            <div class="p-4 bg-gradient-to-r from-green-50 to-green-100 rounded-lg border-l-4 border-green-500">
                                <h6 class="font-semibold text-green-800 mb-2">üéØ Quality Assurance v13.0</h6>
                                <ul class="text-sm text-green-700 space-y-1">
                                    <li>‚Ä¢ üéØ Alignment dengan Kurikulum Merdeka: 100%</li>
                                    <li>‚Ä¢ üìä Rubrik penilaian 4 level dengan 5 aspek</li>
                                    <li>‚Ä¢ ü§î Refleksi guru 8 pertanyaan kunci</li>
                                    <li>‚Ä¢ üåê AI contextual learning: ${kontekstual.substring(0, 50)}...</li>
                                    <li>‚Ä¢ üõ†Ô∏è Sarana prasarana: ${saranaPrasaranaText}</li>
                                    <li>‚Ä¢ üìö Sumber belajar: ${sumberBelajarText}</li>
                                    <li>‚Ä¢ üìã Structured table format (Word-ready)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Enhanced AI Content Generation Functions
        function generatePertanyaanPemantik(mataPelajaran, topik, kontekstual) {
            const pertanyaanTemplates = {
                'Informatika': [
                    `Bagaimana teknologi ${topik} dapat membantu mengatasi masalah dalam ${kontekstual.substring(0, 80)}...?`,
                    `Apa dampak positif dan negatif dari implementasi ${topik} di Indonesia?`,
                    `Bagaimana cara kerja ${topik} dalam kehidupan sehari-hari kita?`,
                    `Mengapa ${topik} penting untuk masa depan Indonesia?`,
                    `Bagaimana kita dapat menggunakan ${topik} secara etis dan bertanggung jawab?`
                ],
                'Matematika': [
                    `Bagaimana konsep ${topik} dapat diterapkan dalam ${kontekstual.substring(0, 80)}...?`,
                    `Mengapa pemahaman ${topik} penting untuk kehidupan sehari-hari?`,
                    `Bagaimana ${topik} membantu dalam pengambilan keputusan yang tepat?`,
                    `Apa hubungan antara ${topik} dengan teknologi modern?`,
                    `Bagaimana ${topik} berkontribusi pada pembangunan Indonesia?`
                ],
                'default': [
                    `Bagaimana ${topik} berkaitan dengan kehidupan sehari-hari di Indonesia?`,
                    `Mengapa penting bagi kita untuk memahami ${topik}?`,
                    `Bagaimana ${topik} dapat membantu mengatasi masalah dalam ${kontekstual.substring(0, 80)}...?`,
                    `Apa manfaat mempelajari ${topik} untuk masa depan?`,
                    `Bagaimana kita dapat menerapkan ${topik} dalam konteks lokal Indonesia?`
                ]
            };
            
            return pertanyaanTemplates[mataPelajaran] || pertanyaanTemplates['default'];
        }

        function generateAsesmen(mataPelajaran, topik, modelPembelajaran) {
            return {
                formatif: [
                    'Observasi aktivitas siswa selama pembelajaran dengan rubrik engagement',
                    'Tanya jawab interaktif dan diskusi kelompok terstruktur',
                    'Quiz digital real-time menggunakan platform gamifikasi',
                    'Peer assessment dengan kriteria yang jelas',
                    'Exit ticket dengan pertanyaan reflektif dan self-assessment'
                ],
                sumatif: [
                    'Presentasi hasil proyek dengan rubrik komprehensif',
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'992b0fe1d59cde08',t:'MTc2MTE1Nzc4Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
